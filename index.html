<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Two Free</title>
    <!-- Favicon Generator -->
    <link rel="icon" href="#" id="favicon">
    <script>
        // Generate favicon from robot design
        document.addEventListener('DOMContentLoaded', function() {
            // Create a small canvas for the favicon
            const faviconCanvas = document.createElement('canvas');
            faviconCanvas.width = 32;
            faviconCanvas.height = 32;
            const ctx = faviconCanvas.getContext('2d');
            
            // Draw robot head (simplified version of the game robot)
            // Background
            ctx.fillStyle = '#3a5d7c';
            ctx.fillRect(0, 0, 32, 32);
            
            // Body
            ctx.fillStyle = '#E8A30C'; // Wall-E yellow
            ctx.fillRect(4, 10, 24, 20);
            
            // Head
            ctx.fillStyle = '#E8A30C';
            ctx.fillRect(6, 3, 20, 10);
            
            // Eyes
            ctx.fillStyle = '#333';
            ctx.fillRect(16, 5, 8, 6);
            
            // Eye detail
            ctx.fillStyle = '#66CCFF'; // Blue eyes
            ctx.fillRect(18, 6, 4, 4);
            
            // Eyebrow
            ctx.fillStyle = '#333';
            ctx.fillRect(16, 3, 8, 2);
            
            // Treads
            ctx.fillStyle = '#333333';
            ctx.fillRect(2, 24, 28, 6);
            
            // Digging arm
            ctx.fillStyle = '#555';
            ctx.beginPath();
            ctx.moveTo(28, 14);
            ctx.lineTo(32, 12);
            ctx.lineTo(32, 20);
            ctx.lineTo(28, 18);
            ctx.closePath();
            ctx.fill();
            
            // Set the favicon
            const favicon = document.getElementById('favicon');
            favicon.href = faviconCanvas.toDataURL('image/png');
        });
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');
        
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: linear-gradient(to bottom, #041e42, #0a3a6a);
            font-family: 'Orbitron', sans-serif;
            touch-action: none;
            color: white;
        }
        
        #game-wrapper {
            position: relative;
            border-radius: 20px;
            box-shadow: 0 0 40px rgba(0, 100, 255, 0.4);
            border: 2px solid #4a6d8c;
        }
        
        canvas {
            display: block;
            max-width: 100%;
            max-height: 80vh;
            border-radius: 20px;
        }
        
        /* Fix canvas size for mobile */
        @media (max-width: 800px) or (pointer: coarse) {
            canvas {
                max-height: 65vh; /* Allow more space for controls */
            }
        }
        
        #game-container {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            pointer-events: none;
        }
        
        #game-container > * {
            pointer-events: auto;
        }
        
        /* Add space for controls below canvas */
        @media (max-width: 800px) or (pointer: coarse) {
            #game-container {
                padding-bottom: 120px; /* Space for controls - reduced from 180px */
            }
            
            /* Adjust for portrait mode */
            @media (orientation: portrait) {
                canvas {
                    max-height: 60vh;
                }
                
                #game-container {
                    padding-bottom: 150px;
                }
            }
        }
        
        #title-bar {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(0, 20, 40, 0.7);
            padding: 5px 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
        }
        
        .game-title {
            font-size: 24px;
            color: #66CCFF;
            text-shadow: 0 0 10px rgba(102, 204, 255, 0.7);
            margin: 0;
        }
        
        #ui {
            position: absolute;
            top: 50px;
            left: 15px;
            color: white;
            font-size: 18px;
            text-shadow: 1px 1px 2px black;
            display: flex;
            flex-direction: column;
            gap: 5px;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 10px;
            border: 1px solid rgba(102, 204, 255, 0.5);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
        
        .stat-item {
            display: flex;
            align-items: center;
        }
        
        .stat-icon {
            width: 20px;
            height: 20px;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            background: rgba(102, 204, 255, 0.3);
            margin-right: 8px;
            border-radius: 4px;
        }
        
        #level-complete {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 20, 40, 0.95);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            display: none;
            z-index: 3000;
            width: 80%;
            max-width: 400px;
            box-shadow: 0 0 30px rgba(102, 204, 255, 0.7);
            border: 2px solid #66CCFF;
            -webkit-backdrop-filter: blur(5px);
            backdrop-filter: blur(5px);
        }
        
        #level-complete h2 {
            margin-top: 0;
            color: #FFD700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
        }
        
        #level-complete p {
            margin: 15px 0;
        }
        
        .highlight {
            color: #66CCFF;
            font-weight: bold;
            font-size: 1.2em;
        }
        
        #touch-controls {
            display: none;
            width: 100%;
            max-width: 800px;
            margin-top: 20px;
        }
        
        .control-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .control-btn {
            background: rgba(102, 204, 255, 0.3);
            border: 2px solid #66CCFF;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            font-weight: bold;
            user-select: none;
            color: white;
            box-shadow: 0 0 10px rgba(102, 204, 255, 0.5);
            transition: all 0.2s;
        }
        
        .control-btn:active {
            background: rgba(102, 204, 255, 0.6);
            transform: scale(0.95);
        }
        
        .control-btn.large {
            width: 80px;
            height: 80px;
        }
        
        #pauseBtn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(102, 204, 255, 0.4);
            border: 2px solid #66CCFF;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            color: white;
            cursor: pointer;
            z-index: 2500;
            box-shadow: 0 0 15px rgba(102, 204, 255, 0.5);
            -webkit-tap-highlight-color: transparent;
            pointer-events: auto;
        }
        
        #pauseBtn:hover {
            background: rgba(102, 204, 255, 0.6);
            transform: scale(1.05);
        }
        
        #pauseBtn:active {
            background: rgba(102, 204, 255, 0.7);
            transform: scale(0.95);
        }
        
        #soundBtn {
            position: absolute;
            top: 15px;
            right: 75px;
            background: rgba(102, 204, 255, 0.4);
            border: 2px solid #66CCFF;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            color: white;
            cursor: pointer;
            z-index: 2500;
            box-shadow: 0 0 15px rgba(102, 204, 255, 0.5);
            -webkit-tap-highlight-color: transparent;
        }
        
        @media (max-width: 800px) or (pointer: coarse) {
            #touch-controls {
                position: fixed;
                bottom: 10px;
                left: 0;
                right: 0;
                display: flex;
                flex-direction: column;
                z-index: 1000;
                background: none;
                border: none;
                box-shadow: none;
                display: block !important; /* Force display */
            }
            
            /* Make sure the entry screen is visible */
            #entry-screen {
                position: absolute !important;
                top: 0 !important;
                left: 0 !important;
                width: 100% !important;
                height: 100% !important;
                padding: 10px !important;
                overflow-y: scroll !important;
                display: flex !important;
                flex-direction: column !important;
                justify-content: flex-start !important;
                align-items: center !important;
                -webkit-overflow-scrolling: touch !important;
            }
            
            #entry-screen h1 {
                font-size: 32px !important;
                margin-bottom: 15px !important;
                margin-top: 20px !important;
            }
            
            #entry-screen p {
                font-size: 14px !important;
                line-height: 1.4 !important;
            }
            
            #entry-screen div {
                padding: 15px !important;
                max-width: 95% !important;
                margin-bottom: 15px !important;
            }
            
            #start-game-btn {
                margin: 0 0 30px 0 !important;
                padding: 15px 30px !important;
                font-size: 22px !important;
                background: rgba(102, 204, 255, 0.5) !important;
                border-width: 3px !important;
                position: relative !important;
                display: block !important;
            }
            
            /* Make start button more prominent */
            #start-game-btn {
                margin-top: 20px !important;
                padding: 15px 30px !important;
                font-size: 22px !important;
                background: rgba(102, 204, 255, 0.5) !important;
                border-width: 3px !important;
            }
            
            /* Control buttons base style */
            .control-btn {
                width: 75px;
                height: 75px;
                background: rgba(102, 204, 255, 0.5);
                border: 3px solid #66CCFF;
                box-shadow: 0 0 15px rgba(102, 204, 255, 0.7);
                border-radius: 50%;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                color: white;
                -webkit-tap-highlight-color: transparent;
                touch-action: manipulation;
                transition: all 0.2s;
            }
            
            .control-btn.large {
                width: 85px;
                height: 85px;
            }
            
            .control-btn.dig-btn {
                background: rgba(255, 160, 0, 0.5);
                border-color: #FFA000;
                box-shadow: 0 0 15px rgba(255, 160, 0, 0.7);
            }
            
            .btn-icon {
                font-size: 32px;
                text-shadow: 0 0 5px rgba(0, 0, 0, 0.7);
            }
            
            .btn-label {
                font-size: 14px;
                text-shadow: 0 0 5px rgba(0, 0, 0, 0.7);
            }
        }
        
        @keyframes twinkle {
            0% { opacity: 0.3; }
            100% { opacity: 1; }
        }
        
        /* Add better centering for tablet */
        @media (min-width: 600px) and (max-width: 1024px) {
            body {
                display: flex;
                justify-content: center;
                align-items: center;
                min-height: 100vh;
                padding: 0;
                margin: 0;
            }
            
            #game-wrapper {
                max-width: 90%;
                margin: 0 auto;
            }
            
            canvas {
                max-height: 70vh;
                margin: 0 auto;
            }
            
            #game-container {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                padding-bottom: 120px; /* Space for controls */
            }
            
            #touch-controls {
                width: 100%;
                max-width: 600px;
                margin: 0 auto;
            }
            
            /* Improve tablet layout spacing */
            #tablet-layout {
                padding: 0 10%;
            }
            
            .control-btn {
                width: 85px;
                height: 85px;
            }
            
            .control-btn.large {
                width: 100px;
                height: 100px;
            }
            
            .btn-icon {
                font-size: 36px;
            }
            
            .btn-label {
                font-size: 16px;
                margin-top: 5px;
            }
        }
        
        /* Tablet controls specific styling */
        #tablet-layout {
            position: relative;
            display: flex;
            justify-content: space-between;
            padding: 10px 20px;
            margin-top: 10px;
        }
        
        .tablet-controls-left {
            position: static;
            display: flex;
            gap: 20px;
            justify-content: flex-start;
        }
        
        .tablet-controls-right {
            position: static;
            display: flex;
            gap: 20px;
            justify-content: flex-end;
        }

        /* Center control group for tablet layout */
        .control-group.center {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
        }

        /* Style for the shoot button in tablet layout */
        #tablet-layout .shoot-btn {
            background: rgba(255, 215, 0, 0.3) !important;
            border: 3px solid #FFD700 !important;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.7) !important;
        }

        #tablet-layout .shoot-btn:active {
            background: rgba(255, 215, 0, 0.5) !important;
            transform: scale(0.95);
        }
        
        /* Phone-specific adjustments */
        @media (max-width: 480px) {
            #tablet-layout {
                display: flex !important;
                justify-content: space-between;
                padding: 0 10px;
            }
            
            /* Hide other layouts */
            #standard-layout, #lefty-layout {
                display: none !important;
            }
            
            .control-btn {
                width: 65px;
                height: 65px;
                margin: 5px;
                border-width: 2px;
            }
            
            .btn-icon {
                font-size: 28px;
            }
            
            /* Remove the label spacing since we're not showing labels */
            .btn-label {
                display: none;
            }
            
            /* Make all buttons the same size */
            .control-btn.large {
                width: 65px;
                height: 65px;
            }
            
            /* Clean up control bar */
            #touch-controls {
                padding: 10px 5px;
            }
            
            /* Make canvas use more vertical space but leave room for controls */
            canvas {
                max-height: 60vh !important;
            }
            
            /* Clean up UI display */
            #ui {
                top: 45px;
                left: 10px;
                font-size: 14px;
                padding: 8px;
            }
            
            /* Keep pause button visible */
            #pauseBtn, #soundBtn {
                width: 42px;
                height: 42px;
                font-size: 20px;
                top: 10px;
            }
            
            #pauseBtn {
                right: 10px;
            }
            
            #soundBtn {
                right: 60px;
            }
            
            /* Add space at the bottom for the control bar */
            body {
                padding-bottom: 100px;
            }
            
            #game-container {
                padding-bottom: 100px !important;
            }
            
            /* Additional mobile adjustments are already handled in the main selector at the top */
        }
        
        /* Medium-small phones (430px and below) */
        @media (max-width: 430px) {
            .control-btn, .control-btn.large {
                width: 60px;
                height: 60px;
                margin: 3px;
            }
            
            .btn-icon {
                font-size: 26px;
            }
            
            #touch-controls {
                padding: 8px 3px;
            }
            
            .tablet-controls-left, .tablet-controls-right {
                gap: 8px;
            }
            
            /* Make buttons more compact */
            .control-btn {
                width: 60px;
                height: 60px;
                margin: 2px;
                border-width: 2px;
            }
            
            .control-btn.large {
                width: 70px;
                height: 70px;
            }
            
            .btn-icon {
                font-size: 22px;
            }
            
            /* Adjust UI for smaller screens */
            #ui {
                font-size: 13px;
                padding: 6px;
                top: 42px;
                left: 8px;
            }
            
            /* Smaller pause and sound buttons */
            #pauseBtn, #soundBtn {
                width: 40px;
                height: 40px;
                font-size: 19px;
            }
            
            #pauseBtn {
                right: 8px;
            }
            
            #soundBtn {
                right: 55px;
            }
        }
        
        /* Smaller phones (390px and below) */
        @media (max-width: 390px) {
            .control-btn, .control-btn.large {
                width: 55px;
                height: 55px;
                margin: 2px;
            }
            
            .btn-icon {
                font-size: 24px;
            }
            
            #touch-controls {
                padding: 5px 2px;
            }
            
            .tablet-controls-left, .tablet-controls-right {
                gap: 5px;
            }
            
            /* Make buttons more compact but ensure text fits */
            .control-btn {
                width: 55px;
                height: 55px;
                margin: 2px;
                border-width: 2px;
            }
            
            .control-btn.large {
                width: 65px;
                height: 65px;
            }
            
            .btn-icon {
                font-size: 22px;
            }
            
            .btn-label {
                font-size: 10px;
                margin-top: 1px;
            }
            
            /* Adjust UI for smaller screens */
            #ui {
                font-size: 12px;
                padding: 5px;
                top: 40px;
                left: 5px;
            }
            
            /* Smaller pause and sound buttons */
            #pauseBtn, #soundBtn {
                width: 38px;
                height: 38px;
                font-size: 18px;
            }
            
            #pauseBtn {
                right: 5px;
            }
            
            #soundBtn {
                right: 50px;
            }
        }
        
        /* Tablet controls button styling */
        #tablet-layout .control-btn {
            width: 80px;
            height: 80px;
            font-size: 32px;
            background: rgba(102, 204, 255, 0.5);
            border: 3px solid #66CCFF;
            box-shadow: 0 0 20px rgba(102, 204, 255, 0.7);
            margin: 10px 0;
        }
        
        #tablet-layout .control-btn.large {
            width: 90px;
            height: 90px;
        }
        
        #tablet-layout .control-btn.dig-btn {
            background: rgba(255, 160, 0, 0.5);
            border-color: #FFA000;
            box-shadow: 0 0 20px rgba(255, 160, 0, 0.7);
        }
        
        #tablet-layout .btn-icon {
            font-size: 38px;
        }
        
        #tablet-layout .btn-label {
            font-size: 14px;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.7);
        }
        
        /* Extra small screen adjustments (less than 320px) */
        @media (max-width: 320px) {
            .control-btn, .control-btn.large {
                width: 50px;
                height: 50px;
                margin: 2px;
            }
            
            .btn-icon {
                font-size: 22px;
            }
            
            #touch-controls {
                padding: 3px 1px;
            }
            
            .tablet-controls-left, .tablet-controls-right {
                gap: 3px;
            }
            
            /* Adjust layout for tiny screens */
            #tablet-layout {
                padding: 5px 0;
                width: 100%;
                gap: 0;
            }
            
            .tablet-controls-left, .tablet-controls-right {
                gap: 5px;
            }
            
            /* Make buttons even smaller for tiny screens */
            .control-btn {
                width: 50px;
                height: 50px;
            }
            
            .control-btn.large {
                width: 60px;
                height: 60px;
            }
            
            .btn-icon {
                font-size: 22px;
            }
            
            .btn-label {
                font-size: 9px;
            }
            
            /* Adjust UI and button positions */
            #ui {
                font-size: 12px;
                padding: 5px;
                left: 5px;
            }
            
            #pauseBtn, #soundBtn {
                width: 36px;
                height: 36px;
                font-size: 18px;
            }
            
            #pauseBtn {
                right: 5px;
            }
            
            #soundBtn {
                right: 45px;
            }
        }
        
        /* Extremely narrow screens (240px and below) */
        @media (max-width: 240px) {
            /* Adjust controls to be more compact and fit within screen */
            #tablet-layout {
                padding: 0;
                justify-content: center;
                width: 100%;
                margin: 0 auto;
            }
            
            /* Remove padding from touch controls container */
            #touch-controls {
                padding: 0 !important; /* Override any other padding */
                background: rgba(0, 10, 20, 0.6);
            }
            
            .tablet-controls-left {
                width: 45%;
                justify-content: flex-start;
                margin-left: 1px;
            }
            
            .tablet-controls-right {
                width: 45%;
                justify-content: flex-end;
                margin-right: 1px;
            }
            
            .tablet-controls-left, .tablet-controls-right {
                gap: 1px;
            }
            
            /* Make buttons extremely small but still usable */
            .control-btn {
                width: 40px;
                height: 40px;
                border-width: 1px;
                box-shadow: 0 0 3px rgba(102, 204, 255, 0.5);
                margin: 0;
            }
            
            .control-btn.large {
                width: 45px; 
                height: 45px;
            }
            
            .btn-icon {
                font-size: 16px;
                margin: 0;
            }
            
            .btn-label {
                font-size: 8px;
                margin: 0;
            }
            
            /* Adjust other UI elements */
            #ui {
                top: 35px;
                max-width: 80px;
                font-size: 10px;
                padding: 3px;
            }
            
            /* Make pause and sound buttons smaller */
            #pauseBtn, #soundBtn {
                width: 30px;
                height: 30px;
                font-size: 14px;
                top: 5px;
            }
            
            #pauseBtn {
                right: 5px;
            }
            
            #soundBtn {
                right: 40px;
            }
        }
        
        /* Add shoot button styles */
        .shoot-btn {
            background: rgba(0, 255, 255, 0.3) !important;
            border-color: #00ffff !important;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.7) !important;
        }
        
        .shoot-btn:active {
            background: rgba(0, 255, 255, 0.5) !important;
        }
        
        /* Mobile controls */
        #mobileControls {
            display: none;
            position: fixed;
            bottom: 20px;
            left: 0;
            right: 0;
            justify-content: space-between;
            padding: 0 20px;
            pointer-events: none;
            touch-action: none;
        }
        
        .control-group {
            display: flex;
            gap: 10px;
            pointer-events: auto;
        }
        
        .control-group.center {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            bottom: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        
        .mobile-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.4);
            color: white;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            user-select: none;
            -webkit-user-select: none;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: transform 0.1s, background-color 0.2s;
        }
        
        .mobile-button:active {
            transform: scale(0.95);
            background: rgba(255, 255, 255, 0.3);
        }
        
        .mobile-button.fire {
            background: rgba(255, 215, 0, 0.2);
            border-color: rgba(255, 215, 0, 0.4);
        }
        
        .mobile-button.fire:active {
            background: rgba(255, 215, 0, 0.3);
        }
        
        @media (max-width: 1024px) {
            #mobileControls {
                display: flex;
            }
        }
    </style>
</head>
<body>
    <div id="game-wrapper">
        <div id="title-bar">
            <h1 class="game-title">TWO FREE</h1>
        </div>
        
        <!-- Entry screen overlay -->
        <div id="entry-screen" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 20, 40, 0.95); display: flex; flex-direction: column; justify-content: flex-start; align-items: center; z-index: 2000; text-align: center; padding: 20px; overflow-y: auto; box-sizing: border-box;">
            <!-- Background animation -->
            <div style="position: absolute; width: 100%; height: 100%; overflow: hidden; opacity: 0.2; z-index: -1;">
                <div id="bg-stars" style="position: absolute; top: 0; left: 0; width: 200%; height: 200%;"></div>
            </div>
            
            <h1 style="color: #66CCFF; text-shadow: 0 0 20px rgba(102, 204, 255, 0.7); font-size: 48px; margin-top: 30px; margin-bottom: 20px;">TWO FREE</h1>
            
            <div style="background: rgba(0, 10, 20, 0.8); padding: 20px; border-radius: 15px; max-width: 80%; margin: 0 auto 20px auto; border: 2px solid #66CCFF; box-shadow: 0 0 30px rgba(102, 204, 255, 0.3);">
                <p style="color: #fff; margin-bottom: 20px; line-height: 1.5;">In a world torn apart by war, you are one of the two remaining free robots. Your mission is to collect precious energy diamonds deep underground while avoiding deadly missile strikes from above.</p>
                
                <div style="display: flex; flex-wrap: wrap; justify-content: space-around; margin: 20px 0;">
                    <div style="text-align: center; margin: 0 5px 10px 5px;">
                        <div style="color: #fff; margin-bottom: 10px;">Movement</div>
                        <div style="display: flex; gap: 5px;">
                            <div style="background: rgba(102, 204, 255, 0.3); border: 1px solid #66CCFF; padding: 5px 12px; border-radius: 4px;">↑</div>
                            <div style="background: rgba(102, 204, 255, 0.3); border: 1px solid #66CCFF; padding: 5px 12px; border-radius: 4px;">←</div>
                            <div style="background: rgba(102, 204, 255, 0.3); border: 1px solid #66CCFF; padding: 5px 12px; border-radius: 4px;">↓</div>
                            <div style="background: rgba(102, 204, 255, 0.3); border: 1px solid #66CCFF; padding: 5px 12px; border-radius: 4px;">→</div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin: 0 5px 10px 5px;">
                        <div style="color: #fff; margin-bottom: 10px;">Dig (Down Arrow)</div>
                        <div style="background: rgba(102, 204, 255, 0.3); border: 1px solid #66CCFF; padding: 5px 12px; border-radius: 4px;">↓</div>
                    </div>
                </div>
                
                <p style="color: #fff; margin: 20px 0; line-height: 1.5;">Hide underground to escape missile attacks. Collect all diamonds to advance to the next level.</p>
            </div>
            
            <button id="start-game-btn" style="margin: 0 0 30px 0; background: rgba(102, 204, 255, 0.3); color: white; border: 2px solid #66CCFF; padding: 15px 40px; font-size: 24px; border-radius: 50px; cursor: pointer; font-family: 'Orbitron', sans-serif; box-shadow: 0 0 20px rgba(102, 204, 255, 0.5); transition: all 0.3s ease; position: relative;">START MISSION</button>
        </div>
        
        <div id="game-container">
            <canvas id="gameCanvas" width="800" height="600"></canvas>
            
            <!-- Pause and Sound buttons -->
            <div id="pauseBtn" role="button" aria-label="Pause game" tabindex="0">⏸️</div>
            <div id="soundBtn" role="button" aria-label="Toggle sound" tabindex="0">🔊</div>
            
            <div id="ui">
                <div class="stat-item">
                    <div class="stat-icon">⚡</div>
                    <div>Energy: <span id="energyDisplay">0</span></div>
                </div>
                <div class="stat-item">
                    <div class="stat-icon">🏆</div>
                    <div>Level: <span id="levelDisplay">1</span></div>
                </div>
                <div class="stat-item">
                    <div class="stat-icon">💎</div>
                    <div>Diamonds: <span id="diamondDisplay"></span></div>
                </div>
            </div>
            
            <div id="level-complete">
                <h2>Level Complete!</h2>
                <p>You collected all treasures!</p>
                <p>Level bonus: <span id="levelBonus" class="highlight">0</span></p>
                <p>Total diamonds: <span id="totalDiamonds" class="highlight">0</span></p>
                <p>Next level starting in <span id="countdown" class="highlight">3</span>...</p>
            </div>
            
            <!-- Game Over screen -->
            <div id="game-over" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(139, 0, 0, 0.95); color: white; padding: 30px; border-radius: 15px; text-align: center; display: none; z-index: 3000; width: 80%; max-width: 400px; box-shadow: 0 0 30px rgba(255, 0, 0, 0.7); border: 2px solid #ff0000; -webkit-backdrop-filter: blur(5px); backdrop-filter: blur(5px);">
                <h2 style="color: #ff3333; text-shadow: 0 0 10px rgba(255, 0, 0, 0.7); margin-top: 0;">GAME OVER</h2>
                <p>Your robot was destroyed by enemy forces!</p>
                <p>Diamonds collected: <span id="finalDiamonds" class="highlight">0</span></p>
                <p>Levels completed: <span id="levelsCompleted" class="highlight">0</span></p>
                <button id="restart-game-btn" style="margin-top: 20px; background: rgba(255, 0, 0, 0.3); color: white; border: 2px solid #ff3333; padding: 15px 40px; font-size: 20px; border-radius: 50px; cursor: pointer; font-family: 'Orbitron', sans-serif; box-shadow: 0 0 20px rgba(255, 0, 0, 0.5); transition: all 0.3s ease;">RESTART MISSION</button>
            </div>
            
            <!-- Achievement notification area -->
            <div id="achievements" style="position: absolute; top: 60px; left: 0; right: 0; display: flex; flex-direction: column; align-items: center; gap: 10px; z-index: 1000;"></div>
            
            <div id="touch-controls" role="group" aria-label="Game controls">
                <!-- Standard layout (default) -->
                <div id="standard-layout" role="group" aria-label="Standard control layout">
                    <div class="control-row">
                        <div id="leftBtn" class="control-btn" role="button" aria-label="Move left">
                            <span class="btn-icon">←</span>
                        </div>
                        <div id="rightBtn" class="control-btn" role="button" aria-label="Move right">
                            <span class="btn-icon">→</span>
                        </div>
                        <div id="digBtn" class="control-btn dig-btn" role="button" aria-label="Dig">
                            <span class="btn-icon">↓</span>
                        </div>
                        <div id="jumpBtn" class="control-btn" role="button" aria-label="Jump">
                            <span class="btn-icon">↑</span>
                        </div>
                        <div id="shootBtn" class="control-btn shoot-btn" role="button" aria-label="Shoot">
                            <span class="btn-icon">⚡</span>
                        </div>
                    </div>
                </div>
                
                <!-- Tablet layout (hidden by default) -->
                <div id="tablet-layout" role="group" aria-label="Tablet control layout" style="display: none;">
                    <div class="tablet-controls-left">
                        <div id="leftBtn-alt" class="control-btn" role="button" aria-label="Move left">
                            <span class="btn-icon">←</span>
                        </div>
                        <div id="rightBtn-alt" class="control-btn" role="button" aria-label="Move right">
                            <span class="btn-icon">→</span>
                        </div>
                    </div>
                    <div class="control-group center">
                        <div id="shootBtn-alt" class="control-btn shoot-btn" role="button" aria-label="Shoot">
                            <span class="btn-icon">⚡</span>
                        </div>
                    </div>
                    <div class="tablet-controls-right">
                        <div id="digBtn-alt" class="control-btn dig-btn" role="button" aria-label="Dig">
                            <span class="btn-icon">↓</span>
                        </div>
                        <div id="jumpBtn-alt" class="control-btn" role="button" aria-label="Jump">
                            <span class="btn-icon">↑</span>
                        </div>
                    </div>
                </div>
                
                <!-- Left-handed layout (hidden by default) -->
                <div id="lefty-layout" role="group" aria-label="Left-handed control layout" style="display: none;">
                    <div class="control-row">
                        <div id="leftBtn-left" class="control-btn" role="button" aria-label="Move left">
                            <span class="btn-icon">←</span>
                        </div>
                        <div id="rightBtn-left" class="control-btn" role="button" aria-label="Move right">
                            <span class="btn-icon">→</span>
                        </div>
                        <div id="digBtn-left" class="control-btn dig-btn" role="button" aria-label="Dig">
                            <span class="btn-icon">↓</span>
                        </div>
                        <div id="jumpBtn-left" class="control-btn" role="button" aria-label="Jump">
                        <div id="jumpBtn-left" class="control-btn large" role="button" aria-label="Jump">
                            <span class="btn-icon">↑</span>
                            <span class="btn-label">JUMP</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Load the main script using Vite's entry point -->
    <script type="module" src="/src/js/main.js"></script>
    
    <script>
        // Create animated stars in the background
        document.addEventListener('DOMContentLoaded', function() {
            const bgStars = document.getElementById('bg-stars');
            
            // Create 100 stars
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                const size = Math.random() * 3 + 1;
                const opacity = Math.random() * 0.7 + 0.3;
                
                star.style.position = 'absolute';
                star.style.width = size + 'px';
                star.style.height = size + 'px';
                star.style.backgroundColor = 'white';
                star.style.borderRadius = '50%';
                star.style.opacity = opacity;
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.boxShadow = '0 0 ' + (size*2) + 'px rgba(255, 255, 255, 0.8)';
                
                // Add subtle animation
                star.style.animation = 'twinkle ' + (Math.random() * 3 + 2) + 's infinite alternate';
                
                bgStars.appendChild(star);
            }
        });
    </script>
    
    <script>
        // Touch controls layout management
        document.addEventListener('DOMContentLoaded', function() {
            const standardLayout = document.getElementById('standard-layout');
            const tabletLayout = document.getElementById('tablet-layout');
            const leftyLayout = document.getElementById('lefty-layout');
            const touchControls = document.getElementById('touch-controls');
            const pauseBtn = document.getElementById('pauseBtn');
            const entryScreen = document.getElementById('entry-screen');
            const startBtn = document.getElementById('start-game-btn');
            
            // Special handling for extremely narrow screens
            function handleExtremelyNarrowScreens() {
                if (window.innerWidth <= 430) {
                    // Force styles for very narrow screens
                    touchControls.style.padding = '0';
                    const leftButtons = document.querySelectorAll('.control-btn');
                    leftButtons.forEach(btn => {
                        btn.style.width = '55px';
                        btn.style.height = '55px';
                        btn.style.margin = '2px';
                        btn.style.borderWidth = '2px';
                    });
                    
                    // Make large buttons slightly larger
                    const largeButtons = document.querySelectorAll('.control-btn.large');
                    largeButtons.forEach(btn => {
                        btn.style.width = '65px';
                        btn.style.height = '65px';
                    });
                    
                    // Even more compact for truly tiny screens
                    if (window.innerWidth <= 390) {
                        leftButtons.forEach(btn => {
                            btn.style.width = '50px';
                            btn.style.height = '50px';
                            btn.style.margin = '1px';
                        });
                        
                        largeButtons.forEach(btn => {
                            btn.style.width = '58px';
                            btn.style.height = '58px';
                        });
                    }
                    
                    // Super compact for extremely small screens
                    if (window.innerWidth <= 240) {
                        leftButtons.forEach(btn => {
                            btn.style.width = '40px';
                            btn.style.height = '40px';
                            btn.style.margin = '0';
                            btn.style.borderWidth = '1px';
                        });
                        
                        largeButtons.forEach(btn => {
                            btn.style.width = '45px';
                            btn.style.height = '45px';
                        });
                    }
                }
            }
            
            // Make sure touch controls are visible on mobile devices
            if (window.innerWidth <= 800 || (window.matchMedia && window.matchMedia('(pointer: coarse)').matches)) {
                touchControls.style.display = 'block';
                
                // Fix mobile start button visibility
                startBtn.style.fontSize = '22px';
                startBtn.style.padding = '15px 30px';
                startBtn.style.background = 'rgba(102, 204, 255, 0.5)';
                startBtn.style.borderWidth = '3px';
                
                // Check for extremely narrow screens
                handleExtremelyNarrowScreens();
            }
            
            // Set up pause button functionality
            if (pauseBtn) {
                const handlePause = function(e) {
                    e.preventDefault(); // Prevent any default behavior
                    // Ensure the window.togglePause exists before calling it
                    if (typeof window.togglePause === 'function') {
                        window.togglePause();
                    }
                };
                
                // Add both click and touch events
                pauseBtn.addEventListener('click', handlePause);
                pauseBtn.addEventListener('touchend', handlePause);
            }
            
            // Use localStorage to remember user's layout preference
            let savedLayout = localStorage.getItem('controlLayout');
            
            // Set layout based on saved preference or device
            function setLayout() {
                // Check device type based on screen size
                const isPhone = window.innerWidth < 480;
                const isTablet = window.innerWidth >= 480 && window.innerWidth <= 1024;
                
                // For phones, force tablet layout as it works better
                if (isPhone) {
                    savedLayout = 'tablet';
                    localStorage.setItem('controlLayout', 'tablet');
                }
                // If device is tablet and no preference saved, set tablet layout as default
                else if (isTablet && !savedLayout) {
                    savedLayout = 'tablet';
                    localStorage.setItem('controlLayout', 'tablet');
                }
                
                // If no preference set, default to standard
                if (!savedLayout) {
                    savedLayout = 'standard';
                    localStorage.setItem('controlLayout', 'standard');
                }
                
                // Apply the layout
                standardLayout.style.display = 'none';
                tabletLayout.style.display = 'none';
                leftyLayout.style.display = 'none';
                
                if (savedLayout === 'standard') {
                    standardLayout.style.display = 'block';
                } else if (savedLayout === 'tablet') {
                    tabletLayout.style.display = 'flex';
                } else if (savedLayout === 'lefty') {
                    leftyLayout.style.display = 'block';
                }
                
                // Make sure touch controls are always visible on mobile
                if (window.innerWidth <= 800 || (window.matchMedia && window.matchMedia('(pointer: coarse)').matches)) {
                    touchControls.style.display = 'block';
                }
                
                // For phones, always use tablet layout
                if (isPhone) {
                    tabletLayout.style.display = 'flex';
                }
                
                // Handle extremely narrow screens
                handleExtremelyNarrowScreens();
            }
            
            setLayout();
            
            // Switch layout on screen orientation change or resize
            window.addEventListener('resize', function() {
                setLayout();
            });
            
            // Connect alternative layout buttons to the same functions as the standard buttons
            function setupAltButtons() {
                // Get all button references
                const buttons = {
                    jump: [document.getElementById('jumpBtn'), document.getElementById('jumpBtn-alt'), document.getElementById('jumpBtn-left')],
                    left: [document.getElementById('rightBtn'), document.getElementById('rightBtn-alt'), document.getElementById('rightBtn-left')],
                    right: [document.getElementById('leftBtn'), document.getElementById('leftBtn-alt'), document.getElementById('leftBtn-left')],
                    dig: [document.getElementById('digBtn'), document.getElementById('digBtn-alt'), document.getElementById('digBtn-left')],
                    shoot: [document.getElementById('shootBtn'), document.getElementById('shootBtn-alt'), document.getElementById('shootBtn-left')]
                };
                
                // Function to dispatch an event to the original button
                function mirrorTouch(originalBtn, eventType) {
                    if (originalBtn) {
                        const event = new Event(eventType);
                        originalBtn.dispatchEvent(event);
                    }
                }
                
                // For each control type (jump, left, right, dig, shoot)
                for (const [action, btns] of Object.entries(buttons)) {
                    const primaryBtn = btns[0];
                    
                    // Skip if primary button not found
                    if (!primaryBtn) continue;
                    
                    // Set up alternative buttons to mirror primary button events
                    for (let i = 1; i < btns.length; i++) {
                        if (btns[i]) {
                            ['touchstart', 'touchend', 'mousedown', 'mouseup', 'mouseleave'].forEach(eventType => {
                                btns[i].addEventListener(eventType, () => mirrorTouch(primaryBtn, eventType));
                            });
                        }
                    }
                }
            }
            
            // Set up the alternative buttons after a short delay to ensure DOM is fully loaded
            setTimeout(setupAltButtons, 500);
        });
    </script>
</body>
</html> 